{%load static%}

<!DOCTYPE html>

<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=search" />
    <link rel="stylesheet" href="{% static '/css/listar_veiculo.css'%}">
    <script src="{% static 'js/filtros.js' %}"></script>
    <script src="{% static 'js/pesquisa.js' %}"></script>

    <title>Lista de Veiculos</title>
  </head>
  
  <body>

    {% block sidebar %}
            {% include 'nav.html' %}
    {% endblock %}

    <main>

      <div class="title">
        <h1>Veículos</h1>
      </div>

      <div class="filtros">

        <div class="status_exibir_container">

          <h3>Filtros</h3>

          <div class="line"></div>

          <div class="status_exibir">

            <div class="status_container">
              <div class="title_status">
                <h3>Status</h3>
              </div>

              <div class="status">
                <select name="status" id="status" onchange="filtrar()">
                  <option value="">Todos</option>
                  <option value="Disponível" {% if status == "Disponível" %}selected{% endif %}>Disponível</option>
                  <option value="Indisponível" {% if status == "Indisponível" %}selected{% endif %}>Indisponível</option>
                  <option value="Ocupado" {% if status == "Ocupado" %}selected{% endif %}>Ocupado</option>
                  <option value="Manutencao" {% if status == "Manutencao" %}selected{% endif %}>Em Manutenção</option>
                </select>
              </div>
            </div>
            <div class="exibir_container">
              <div class="title_exibir">
                <h3>Exibir</h3>
              </div>
              <div class="exibir">
                <select name="exibir" id="exibir" onchange="filtrar()">
                  <option value="10" {% if exibir == 10 %}selected{% endif %}>Listar 10 por página</option>
                  <option value="20" {% if exibir == 20 %}selected{% endif %}>Listar 20 por página</option>
                  <option value="30" {% if exibir == 30 %}selected{% endif %}>Listar 30 por página</option>
                  <option value="40" {% if exibir == 40 %}selected{% endif %}>Listar 40 por página</option>
                </select>
              </div>
            </div>
          </div>
          <div class="linev"></div>

        </div>

        <div class="pesquisa_container">
          <div class="pesquisa">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg>
            <input type="search" id="pesquisa" placeholder="Pesquisar por placas" oninput="pesquisarVeiculos()">
        </div>
        
      
          <div class="line"></div>
          <div class="btn_adicionar">
              <a href="/cadastro_veiculo/">
                  <span>Adicionar Veiculo</span>
              </a>
          </div>
        </div>
      </div>

      <div class="lista_container">

      <div class="grid-container" id="lista_veiculos">
          {% for veiculo in veiculos %}
          <div class="card">
            <div class="marca">
              <h3>{{ veiculo.marca }}</h3>
            </div>
            <div class="placa_modelo">
              <p>{{ veiculo.modelo }}</p>
              <p class="p_placa" >{{ veiculo.placa }}</p>
            </div> 
            <div class="imagem">
              <svg width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.45 47.525L6.4 47.575C5.725 46.1 5.3 44.425 5.125 42.575C5.3 44.4 5.775 46.05 6.45 47.525Z" fill="#85A8F8"/><path d="M22.5 25.95C25.7861 25.95 28.45 23.2861 28.45 20C28.45 16.7139 25.7861 14.05 22.5 14.05C19.214 14.05 16.55 16.7139 16.55 20C16.55 23.2861 19.214 25.95 22.5 25.95Z" fill="#85A8F8"/><path d="M40.475 5H19.525C10.425 5 5 10.425 5 19.525V40.475C5 43.2 5.475 45.575 6.4 47.575C8.55 52.325 13.15 55 19.525 55H40.475C49.575 55 55 49.575 55 40.475V34.75V19.525C55 10.425 49.575 5 40.475 5ZM50.925 31.25C48.975 29.575 45.825 29.575 43.875 31.25L33.475 40.175C31.525 41.85 28.375 41.85 26.425 40.175L25.575 39.475C23.8 37.925 20.975 37.775 18.975 39.125L9.625 45.4C9.075 44 8.75 42.375 8.75 40.475V19.525C8.75 12.475 12.475 8.75 19.525 8.75H40.475C47.525 8.75 51.25 12.475 51.25 19.525V31.525L50.925 31.25Z" fill="#85A8F8"/></svg>
            </div>             
            <div class="ano_status">
              <p class="p_ano">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M360-300q-42 0-71-29t-29-71q0-42 29-71t71-29q42 0 71 29t29 71q0 42-29 71t-71 29ZM200-80q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H200Zm0-80h560v-400H200v400Zm0-480h560v-80H200v80Zm0 0v-80 80Z"/></svg>
                {{ veiculo.ano }}
              </p>
              <p class="p_status">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="16" height="16" rx="8" fill="{% if veiculo.status == 'Indisponível' %}#CE0000{% else %}#3563E9{% endif %}" fill-opacity="0.3"/><circle cx="8" cy="8" r="4" fill="{% if veiculo.status == 'Indisponível' %}#CE0000{% else %}#3563E9{% endif %}"/></svg>
                {{ veiculo.status }}
              </p>
            </div>
            <div class="btn_editar">
              <a href="{% url 'editar_veiculo' veiculo.pk %}">Editar</a>
            </div>
          </div>
          {% endfor %}
        </div>
        <div class="pagination-container">
          <div class="pagination">
              {% if veiculos.has_previous %}
                  <a href="?page=1&exibir={{ exibir }}&status={{ status }}" class="page-link">Primeira</a>
                  <a href="?page={{ veiculos.previous_page_number }}&exibir={{ exibir }}&status={{ status }}" class="page-link">Anterior</a>
              {% endif %}
      
              <span class="current-page">Página {{ veiculos.number }} de {{ veiculos.paginator.num_pages }}</span>
      
              {% if veiculos.has_next %}
                  <a href="?page={{ veiculos.next_page_number }}&exibir={{ exibir }}&status={{ status }}" class="page-link">Próxima</a>
                  <a href="?page={{ veiculos.paginator.num_pages }}&exibir={{ exibir }}&status={{ status }}" class="page-link">Última</a>
              {% endif %}
          </div>
      </div>
      
      
      </div>
    </main>
  </body>
</html>
